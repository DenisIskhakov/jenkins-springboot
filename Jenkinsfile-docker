pipeline {
    agent any

    triggers {
        pollSCM '* * * * *'
    }
    stages {
        stage('Build') {
            steps {
                   echo 'Build'
            }
        }
        stage('Test') {
            steps {
                   echo 'Test'
            }
        }
          stage('Build Docker image') {
                    steps {
                        sh 'chmod +x gredlew'
                        sh './gradlew docker'
                    }
                }
                stage('Push Docker image') {
                    environment {
                                DOCKER_HUB_LOGIN = credentials('docker-hub')
                            }
                    steps {
                        sh 'docker login --username=examplejenkins --password=qwerty12345'
                        sh './gradlew dockerPush'
                    }
                }
    }
}